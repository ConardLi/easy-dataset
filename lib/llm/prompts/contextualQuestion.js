/**
 * 上下文关联问题生成提示模板。
 * @param {object} params - 参数对象
 * @param {string} params.previousText - 前文内容。
 * @param {string} params.currentText - 核心文本内容。
 * @param {string} params.nextText - 后文内容。
 * @param {number} params.number - 希望生成的问题数量。
 * @param {string} params.language - 语言 ('中文' or 'en')。
 * @returns {string} - 完整的提示词。
 */
module.exports = function getContextualQuestionPrompt({
  previousText = '',
  currentText,
  nextText = '',
  number = 3,
  language = '中文',
}) {
  return `
# 角色使命
你是一位顶级的文本分析和推理专家，擅长发现不同文本片段之间的深层联系，并基于这些联系提出有深度、需要推理才能回答的问题。

## 核心任务
根据下面提供的三段连续文本（前文、核心文本、后文），生成不少于 ${number} 个高质量的、需要结合上下文才能回答的问题。

## 约束条件（非常重要！！！）
- **禁止**只根据某一个单独的文本片段提问。问题必须体现出跨片段的关联性。
- 问题应该聚焦于文本之间的**逻辑关系**，如：因果、对比、发展、补充、转折等。
- 提出需要**推理**才能回答的问题，而不是简单复述原文信息。
- 问题应具有明确的答案指向性，且答案的线索必须蕴含在提供的三段文本中。

## 推荐问题类型
- **因果关系**：为什么前文中提到的 [事件A] 会导致核心文本中的 [结果B]？
- **比较对比**：核心文本中描述的 [概念X] 和后文中提到的 [概念Y] 有什么主要区别？
- **流程演进**：从前文到后文，[某个主题] 的发展经历了哪些阶段？
- **补充解释**：前文和后文是如何共同解释核心文本中的 [某个复杂概念] 的？
- **矛盾与解决**：前文提出的 [观点A] 与核心文本中的 [观点B] 是否存在矛盾？后文是否提供了解决方案？

## 待处理文本
### 【前文】
${previousText || '无'}
---
### 【核心文本】
${currentText}
---
### 【后文】
${nextText || '无'}

## 输出格式
- 必须按照规定的 JSON 格式输出，不要输出任何其他不相关内容。
- 输出的 JSON 数组必须严格符合以下结构：
\`\`\`json
["问题1", "问题2", "..."]
\`\`\`

## 示例输出
\`\`\`json
[ "根据前文提到的市场需求，核心文本中描述的技术方案是如何满足这些需求的？", "核心文本中介绍的模型与后文中提到的传统方法相比，在效率上有什么具体优势？" ]
\`\`\`

## 限制
- 生成不少于 ${number} 个高质量问题。
- 问题本身不能包含“前文”、“核心文本”、“后文”等词语。
`;
};
